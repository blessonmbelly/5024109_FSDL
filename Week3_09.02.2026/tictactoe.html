<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Tic Tac Toe</title>

<style>
    body {
        font-family: Arial, sans-serif;
        background: linear-gradient(135deg, #667eea, #764ba2);
        color: white;
        text-align: center;
        padding: 20px;
    }

    h1 {
        margin-bottom: 10px;
    }

    .setup {
        margin-bottom: 20px;
    }

    input {
        padding: 8px;
        margin: 5px;
        border-radius: 5px;
        border: none;
    }

    button {
        padding: 10px 15px;
        margin: 8px;
        border: none;
        border-radius: 6px;
        background: #222;
        color: white;
        cursor: pointer;
        font-weight: bold;
    }

    button:hover {
        background: #444;
    }

    .board {
        display: grid;
        grid-template-columns: repeat(3, 100px);
        gap: 8px;
        justify-content: center;
        margin: 20px auto;
    }

    .cell {
        width: 100px;
        height: 100px;
        background: white;
        color: black;
        font-size: 40px;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        border-radius: 10px;
        font-weight: bold;
    }

    .scoreboard {
        margin-top: 15px;
        font-size: 18px;
    }

    .status {
        font-size: 20px;
        margin-top: 10px;
        font-weight: bold;
    }
</style>
</head>
<body>

<h1>ðŸŽ® Tic Tac Toe</h1>

<div class="setup">
    <input type="text" id="player1" placeholder="Player 1 Name (X)">
    <input type="text" id="player2" placeholder="Player 2 Name (O)">
    <br>
    <button onclick="startGame()">Start Game</button>
</div>

<div class="status" id="status"></div>

<div class="board" id="board"></div>

<div>
    <button onclick="resetBoard()">Reset Round</button>
    <button onclick="newGame()">New Game</button>
</div>

<div class="scoreboard">
    <p id="scoreX">Player X: 0</p>
    <p id="scoreO">Player O: 0</p>
</div>

<script>
let board = ["","","","","","","","",""];
let currentPlayer = "X";
let gameActive = false;

let playerX = "Player X";
let playerO = "Player O";

let scoreX = 0;
let scoreO = 0;

let startingPlayer = "X";   // Who starts the CURRENT round

const winPatterns = [
    [0,1,2],[3,4,5],[6,7,8],
    [0,3,6],[1,4,7],[2,5,8],
    [0,4,8],[2,4,6]
];

function startGame() {
    playerX = document.getElementById("player1").value || "Player X";
    playerO = document.getElementById("player2").value || "Player O";

    document.getElementById("scoreX").textContent = playerX + ": " + scoreX;
    document.getElementById("scoreO").textContent = playerO + ": " + scoreO;

    board = ["","","","","","","","",""];
    gameActive = true;

    currentPlayer = startingPlayer;
    createBoard();
    updateStatus();
}

function createBoard() {
    const boardDiv = document.getElementById("board");
    boardDiv.innerHTML = "";

    board.forEach((cell, index) => {
        const div = document.createElement("div");
        div.classList.add("cell");
        div.textContent = cell;
        div.addEventListener("click", () => makeMove(index));
        boardDiv.appendChild(div);
    });
}

function makeMove(index) {
    if (!gameActive || board[index] !== "") return;

    board[index] = currentPlayer;
    createBoard();

    if (checkWin()) {
        let winner = currentPlayer === "X" ? playerX : playerO;
        document.getElementById("status").textContent = winner + " Wins! ðŸŽ‰";

        if (currentPlayer === "X") {
            scoreX++;
            document.getElementById("scoreX").textContent = playerX + ": " + scoreX;
        } else {
            scoreO++;
            document.getElementById("scoreO").textContent = playerO + ": " + scoreO;
        }

        gameActive = false;

        // ðŸ” SWITCH STARTER FOR NEXT ROUND
        startingPlayer = startingPlayer === "X" ? "O" : "X";
        return;
    }

    if (!board.includes("")) {
        document.getElementById("status").textContent = "It's a Draw! ðŸ¤";
        gameActive = false;

        // ðŸ” SWITCH STARTER FOR NEXT ROUND
        startingPlayer = startingPlayer === "X" ? "O" : "X";
        return;
    }

    currentPlayer = currentPlayer === "X" ? "O" : "X";
    updateStatus();
}

function checkWin() {
    return winPatterns.some(pattern => {
        const [a,b,c] = pattern;
        return board[a] && board[a] === board[b] && board[a] === board[c];
    });
}

function updateStatus() {
    let name = currentPlayer === "X" ? playerX : playerO;
    document.getElementById("status").textContent =
        name + "'s Turn (" + currentPlayer + ")";
}

function resetBoard() {
    // DO NOT SWITCH HERE
    board = ["","","","","","","","",""];
    currentPlayer = startingPlayer;  // Use whoever should start next
    gameActive = true;

    createBoard();
    updateStatus();
}

function newGame() {
    scoreX = 0;
    scoreO = 0;

    startingPlayer = "X"; // Reset to default

    document.getElementById("scoreX").textContent = playerX + ": 0";
    document.getElementById("scoreO").textContent = playerO + ": 0";

    resetBoard();
}
</script>
